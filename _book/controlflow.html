<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 11 Control flow | Programming for Data Science in R</title>
<meta name="author" content="Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.9/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.2.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script><script src="libs/d3-3.5.6/d3.min.js"></script><link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet">
<script src="libs/profvis-0.3.6.9000/profvis.js"></script><script src="libs/profvis-0.3.6.9000/scroll.js"></script><link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet">
<script src="libs/highlight-6.2.0/highlight.js"></script><script src="libs/profvis-binding-0.3.7/profvis.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163213745-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-163213745-1');
    </script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="bootstrap.lambdamd.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Programming for Data Science in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">PDSR</a></li>
<li><a class="" href="preface.html"><span class="header-section-number">1</span> Preface</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="Rsetup.html"><span class="header-section-number">3</span> R setup, Packages &amp; Docs</a></li>
<li><a class="" href="basicops.html"><span class="header-section-number">4</span> Basic operations</a></li>
<li><a class="" href="types.html"><span class="header-section-number">5</span> Data Types</a></li>
<li><a class="" href="structures.html"><span class="header-section-number">6</span> Data Structures</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">7</span> Factors</a></li>
<li><a class="" href="indexing.html"><span class="header-section-number">8</span> Indexing - Subsetting - Slicing</a></li>
<li><a class="" href="vectorization.html"><span class="header-section-number">9</span> Vectorized Operations</a></li>
<li><a class="" href="dataio.html"><span class="header-section-number">10</span> Data Input/Output</a></li>
<li><a class="active" href="controlflow.html"><span class="header-section-number">11</span> Control flow</a></li>
<li><a class="" href="loopfns.html"><span class="header-section-number">12</span> Loop Functions</a></li>
<li><a class="" href="summarize.html"><span class="header-section-number">13</span> Summarizing Data</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">14</span> Functions</a></li>
<li><a class="" href="dataframes.html"><span class="header-section-number">15</span> Working with data frames</a></li>
<li><a class="" href="datatrans.html"><span class="header-section-number">16</span> Data Transformations</a></li>
<li><a class="" href="stringops.html"><span class="header-section-number">17</span> String Operations</a></li>
<li><a class="" href="datetime.html"><span class="header-section-number">18</span> Date and Time</a></li>
<li><a class="" href="missingdata.html"><span class="header-section-number">19</span> Handling Missing data</a></li>
<li><a class="" href="classes.html"><span class="header-section-number">20</span> Classes and Object-Oriented Programming</a></li>
<li><a class="" href="datatable.html"><span class="header-section-number">21</span> Efficient data analysis with data.table</a></li>
<li><a class="" href="basegraphics.html"><span class="header-section-number">22</span> Base Graphics</a></li>
<li><a class="" href="graphics3x.html"><span class="header-section-number">23</span> 3x Graphics</a></li>
<li><a class="" href="colors.html"><span class="header-section-number">24</span> Colors in R</a></li>
<li><a class="" href="profiling.html"><span class="header-section-number">25</span> Timing &amp; Profiling</a></li>
<li><a class="" href="optim.html"><span class="header-section-number">26</span> Optimization with optim()</a></li>
<li><a class="" href="glm.html"><span class="header-section-number">27</span> Introduction to the GLM</a></li>
<li><a class="" href="resampling.html"><span class="header-section-number">28</span> Resampling</a></li>
<li><a class="" href="supervised.html"><span class="header-section-number">29</span> Supervised Learning</a></li>
<li><a class="" href="unsupervised.html"><span class="header-section-number">30</span> Unsupervised Learning</a></li>
<li><a class="" href="git.html"><span class="header-section-number">31</span> Git &amp; GitHub: the basics</a></li>
<li><a class="" href="shell.html"><span class="header-section-number">32</span> Introduction to the system shell</a></li>
<li><a class="" href="resources.html"><span class="header-section-number">33</span> Resources</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="controlflow" class="section level1" number="11">
<h1>
<span class="header-section-number">11</span> Control flow<a class="anchor" aria-label="anchor" href="#controlflow"><i class="fas fa-link"></i></a>
</h1>
<p>Code is often not executed linearly (i.e. line-by-line). Control flow (or flow of control) operations define the order in which code segments are executed.</p>
<p>Execution is often conditional (<code>if - then - else</code> or <code>switch</code>).</p>
<p>Segments of code may be repeated multiple times (<code>for</code>) or as long as certain conditions are met (<code>while</code>).</p>
<p>Control flow operations form some of the fundamental building blocks of programs. Each operation is very simple - combine enough of them and you can build up to any amount of complexity.</p>
<ul>
<li>
<code>if</code> [Condition] <code>then</code> [Expression] <code>else</code> [Alternate Expression]</li>
<li>
<code>for</code> [Variable in Sequence] do [Expression]</li>
<li>
<code>while</code> [Condition] do [Expression]</li>
<li>
<code>repeat</code> [Expression] until <code>break</code>
</li>
<li>
<code>break</code>: break out of <code>for</code>, <code>while</code> or <code>repeat</code> loop</li>
<li>
<code>next</code>: skip current iteration and proceed to next</li>
</ul>
<div id="if---then---else" class="section level2" number="11.1">
<h2>
<span class="header-section-number">11.1</span> <code>if</code> - <code>then</code> - <code>else</code>:<a class="anchor" aria-label="anchor" href="#if---then---else"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb712"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="kw">if</span> <span class="op">(</span><span class="va">a</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"a is not that big"</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"a is not too small"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>a is not that big</code></pre>
</div>
<div id="if---then---else-if---else" class="section level2" number="11.2">
<h2>
<span class="header-section-number">11.2</span> <code>if</code> - <code>then</code> - <code>else if</code> - <code>else</code>:<a class="anchor" aria-label="anchor" href="#if---then---else-if---else"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb714"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">.5</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">a</span></code></pre></div>
<pre><code>[1] -0.5</code></pre>
<div class="sourceCode" id="cb716"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">result</span> <span class="op">&lt;-</span> <span class="st">"positive"</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">a</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">result</span> <span class="op">&lt;-</span> <span class="st">"zero"</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="va">result</span> <span class="op">&lt;-</span> <span class="st">"negative"</span>
<span class="op">}</span>
<span class="va">result</span></code></pre></div>
<pre><code>[1] "negative"</code></pre>
</div>
<div id="conditional-assignment-with-if---else" class="section level2" number="11.3">
<h2>
<span class="header-section-number">11.3</span> Conditional assignment with <code>if</code> - <code>else</code>:<a class="anchor" aria-label="anchor" href="#conditional-assignment-with-if---else"><i class="fas fa-link"></i></a>
</h2>
<p>You can use an <code>if</code> statement as part of an assignment:</p>
<div class="sourceCode" id="cb718"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">8</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span>
  <span class="fl">10</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="fl">0</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="conditional-assignment-with-ifelse" class="section level2" number="11.4">
<h2>
<span class="header-section-number">11.4</span> Conditional assignment with <code>ifelse</code>:<a class="anchor" aria-label="anchor" href="#conditional-assignment-with-ifelse"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb719"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="op">(</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 0</code></pre>
<p><code>ifelse</code> is <a href="vectorization.html#vectorization">vectorized</a>:</p>
<div class="sourceCode" id="cb721"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>
<span class="op">(</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">7</span>, <span class="va">a</span><span class="op">^</span><span class="fl">2</span>, <span class="va">a</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code> [1]   1   2   3   4   5   6   7  64  81 100</code></pre>
</div>
<div id="for-loops" class="section level2" number="11.5">
<h2>
<span class="header-section-number">11.5</span> <code>for</code> loops<a class="anchor" aria-label="anchor" href="#for-loops"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdtip">
<p>
Use <code>for</code> loops to repeat execution of a block of code a certain number of times.
</p>
</div>
<p>The for loop syntax is <code>for (var in vector) expression</code>.<br>
The <code>expression</code> is usually surrounded by curly brackets and can include any number of lines, any amount of code:</p>
<div class="sourceCode" id="cb723"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"I love coffee"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>[1] "I love coffee"
[1] "I love coffee"
[1] "I love coffee"
[1] "I love coffee"
[1] "I love coffee"</code></pre>
<p>The loop executes for <code><a href="https://rdrr.io/r/base/length.html">length(vector)</a></code> times.<br>
At iteration <code>i</code>, <code>var = vector[i]</code>.<br>
You will often use the value of <code>var</code> inside the loop (but you don’t have to):</p>
<div class="sourceCode" id="cb725"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">i</span><span class="op">^</span><span class="fl">2</span>, <span class="st">"\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>1 
4 
9 
16 
25 
36 
49 
64 
81 
100 </code></pre>
<p><code>letters</code> is a built-in constant that includes all 26 lowercase letters of the Roman alphabet; <code>LETTERS</code> similarly includes all 26 uppercase letters.</p>
<div class="sourceCode" id="cb727"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">letter</span> <span class="kw">in</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">letter</span>, <span class="st">"is a letter!\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>a is a letter!
b is a letter!
c is a letter!
d is a letter!
e is a letter!</code></pre>
<div id="working-on-data-within-a-for-loop-fordata" class="section level3" number="11.5.1">
<h3>
<span class="header-section-number">11.5.1</span> Working on data within a for loop {fordata}<a class="anchor" aria-label="anchor" href="#working-on-data-within-a-for-loop-fordata"><i class="fas fa-link"></i></a>
</h3>
<p>A common scenario involves working on a data object, whether a vector, matrix, list, data.frame, and performing an operation on each elements, one at a time. While a lot of these operations are often performed using <a href="loopfns.html#loopfns">loop functions</a> instead, for loops can certainly be used.</p>
<p>You can start by initializing an object of the appropriate class and dimensions to hold the output. Then, each iteration of the for loop will assign its output to the corresponding element/s of this object.</p>
<p>In the following example we transform the <code>mtcars</code> built-in dataset’s features to <a href="datatrans.html#zscore">z-scores</a>.
The built-in command <code><a href="https://rdrr.io/r/base/scale.html">scale()</a></code> will do this for quickly and conveniently, this is for demonstration purposes:</p>
<p>First, initialize the output to be the desired class and dimensions:</p>
<div class="sourceCode" id="cb729"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "data.frame"</code></pre>
<div class="sourceCode" id="cb731"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 32 11</code></pre>
<div class="sourceCode" id="cb733"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars_z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">32</span>, <span class="fl">11</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mtcars_z</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></code></pre></div>
<p>or, it is much simpler to just make a copy of <code>mtcars</code> to be overwritten by the for loop later:</p>
<div class="sourceCode" id="cb734"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars_z</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></code></pre></div>
<p>Standardization involves subtracting the mean and dividing by the standard deviation.</p>
<p>Here is the for loop - we iterate through each column and assign the transformed data:</p>
<div class="sourceCode" id="cb735"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">mtcars_z</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Let’s compare to the output of the <code><a href="https://rdrr.io/r/base/scale.html">scale()</a></code> command by print the first 3 rows and columns of each:</p>
<div class="sourceCode" id="cb736"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars_z2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html">scale</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>
<span class="va">mtcars_z</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>                    mpg        cyl       disp
Mazda RX4     0.1508848 -0.1049878 -0.5706198
Mazda RX4 Wag 0.1508848 -0.1049878 -0.5706198
Datsun 710    0.4495434 -1.2248578 -0.9901821</code></pre>
<div class="sourceCode" id="cb738"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars_z2</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>                    mpg        cyl       disp
Mazda RX4     0.1508848 -0.1049878 -0.5706198
Mazda RX4 Wag 0.1508848 -0.1049878 -0.5706198
Datsun 710    0.4495434 -1.2248578 -0.9901821</code></pre>
<p>Note that we wrapped <code><a href="https://rdrr.io/r/base/scale.html">scale()</a></code> around <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame()</a></code> because it outputs a matrix.</p>
<p>We can check that all elements are the same with <code><a href="https://rdrr.io/r/base/all.html">all()</a></code>:</p>
<div class="sourceCode" id="cb740"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">mtcars_z</span> <span class="op">==</span> <span class="va">mtcars_z2</span><span class="op">)</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
</div>
<div id="nested-for-loops" class="section level3" number="11.5.2">
<h3>
<span class="header-section-number">11.5.2</span> Nested <code>for</code> loops<a class="anchor" aria-label="anchor" href="#nested-for-loops"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb742"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="fl">3</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"  a["</span>, <span class="va">i</span>, <span class="st">","</span>, <span class="va">j</span>, <span class="st">"] is "</span>, <span class="va">a</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span>, <span class="st">"\n"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<pre><code>  a[1,1] is 1
  a[1,2] is 4
  a[1,3] is 7
  a[2,1] is 2
  a[2,2] is 5
  a[2,3] is 8
  a[3,1] is 3
  a[3,2] is 6
  a[3,3] is 9</code></pre>
</div>
</div>
<div id="select-one-of-multiple-alternatives-with-switch" class="section level2" number="11.6">
<h2>
<span class="header-section-number">11.6</span> Select one of multiple alternatives with <code>switch</code><a class="anchor" aria-label="anchor" href="#select-one-of-multiple-alternatives-with-switch"><i class="fas fa-link"></i></a>
</h2>
<p>Instead of using multiple <code>if</code> - <code>else if</code> statements, we can build a more compact call using <code>switch</code>. (It is best suited for options that are of type character, rather than numeric)</p>
<div class="sourceCode" id="cb744"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">y</span></code></pre></div>
<pre><code>[1] "e"</code></pre>
<div class="sourceCode" id="cb746"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">output</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">y</span>,                      <span class="co"># 1. Some expression</span>
                 a <span class="op">=</span> <span class="st">"Well done"</span>,        <span class="co"># 2. The possible values of the expression, unquoted</span>
                 b <span class="op">=</span> <span class="st">"Not bad"</span>,          <span class="co">#    followed by the `=` and the conditional output</span>
                 c <span class="op">=</span> <span class="st">"Nice try"</span>,
                 d <span class="op">=</span> <span class="st">"Not a nice try"</span>,
                 e <span class="op">=</span> <span class="st">"This is bad"</span>,
                 f <span class="op">=</span> <span class="st">"Fail"</span>,
                 <span class="st">"This is not even a possible grade"</span><span class="op">)</span> <span class="co"># 3. An optional last argument is the default</span>
                                                      <span class="co">#    value, if there is no match above</span>
<span class="va">output</span></code></pre></div>
<pre><code>[1] "This is bad"</code></pre>
<div class="sourceCode" id="cb748"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">a</span></code></pre></div>
<pre><code>[1] 0.3697853</code></pre>
<div class="sourceCode" id="cb750"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">out</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span>,
              `1` <span class="op">=</span> <span class="st">"Input is positive"</span>,
              `0` <span class="op">=</span> <span class="st">"Input is not positive"</span><span class="op">)</span>
<span class="va">out</span></code></pre></div>
<pre><code>[1] "Input is positive"</code></pre>
<div class="sourceCode" id="cb752"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">a</span></code></pre></div>
<pre><code>[1] 0.6376295</code></pre>
<div class="sourceCode" id="cb754"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">out</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span>,
              `TRUE` <span class="op">=</span> <span class="st">"Input is positive"</span>,
              `FALSE` <span class="op">=</span> <span class="st">"Input is not positive"</span><span class="op">)</span>
<span class="va">out</span></code></pre></div>
<pre><code>[1] "Input is positive"</code></pre>
<div id="switch-example-http-status-codes" class="section level3" number="11.6.1">
<h3>
<span class="header-section-number">11.6.1</span> <code>switch</code> example: HTTP Status Codes<a class="anchor" aria-label="anchor" href="#switch-example-http-status-codes"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb756"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">400</span><span class="op">:</span><span class="fl">410</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">status</span></code></pre></div>
<pre><code>[1] 408</code></pre>
<div class="sourceCode" id="cb758"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">response</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span>,
                   `400` <span class="op">=</span> <span class="st">"Bad Request"</span>,
                   `401` <span class="op">=</span> <span class="st">"Unauthorized"</span>,
                   `402` <span class="op">=</span> <span class="st">"Payment Required"</span>,
                   `403` <span class="op">=</span> <span class="st">"Forbidden"</span>,
                   `404` <span class="op">=</span> <span class="st">"Not Found"</span>,
                   `405` <span class="op">=</span> <span class="st">"Method Not Allowed"</span>,
                   `406` <span class="op">=</span> <span class="st">"Not Acceptable"</span>,
                   `407` <span class="op">=</span> <span class="st">"Proxy Authentication Required"</span>,
                   `408` <span class="op">=</span> <span class="st">"Request Timeout"</span>,
                   `409` <span class="op">=</span> <span class="st">"Conflict"</span>,
                   `410` <span class="op">=</span> <span class="st">"Gone"</span><span class="op">)</span>
<span class="va">response</span></code></pre></div>
<pre><code>[1] "Request Timeout"</code></pre>
</div>
</div>
<div id="while-loops" class="section level2" number="11.7">
<h2>
<span class="header-section-number">11.7</span> <code>while</code> loops<a class="anchor" aria-label="anchor" href="#while-loops"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb760"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="kw">while</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">a</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">-</span> <span class="fl">1</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"a is equal to"</span>, <span class="va">a</span>, <span class="st">"\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>a is equal to 9 
a is equal to 8 
a is equal to 7 
a is equal to 6 
a is equal to 5 
a is equal to 4 
a is equal to 3 
a is equal to 2 
a is equal to 1 
a is equal to 0 </code></pre>
<div class="sourceCode" id="cb762"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"when all is said and done, a is"</span>, <span class="va">a</span><span class="op">)</span></code></pre></div>
<pre><code>when all is said and done, a is 0</code></pre>
</div>
<div id="break-stops-execution-of-a-loop" class="section level2" number="11.8">
<h2>
<span class="header-section-number">11.8</span> <code>break</code> stops execution of a loop:<a class="anchor" aria-label="anchor" href="#break-stops-execution-of-a-loop"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb764"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">5</span><span class="op">)</span> <span class="kw">break</span><span class="op">(</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">i</span>, <span class="st">"squared is"</span>, <span class="va">i</span><span class="op">^</span><span class="fl">2</span>, <span class="st">"\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>1 squared is 1 
2 squared is 4 
3 squared is 9 
4 squared is 16 </code></pre>
</div>
<div id="next-skips-the-current-iteration" class="section level2" number="11.9">
<h2>
<span class="header-section-number">11.9</span> <code>next</code> skips the current iteration:<a class="anchor" aria-label="anchor" href="#next-skips-the-current-iteration"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb766"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">5</span><span class="op">)</span> <span class="kw">next</span><span class="op">(</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">i</span>, <span class="st">"squared is"</span>, <span class="va">i</span><span class="op">^</span><span class="fl">2</span>, <span class="st">"\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>1 squared is 1 
2 squared is 4 
3 squared is 9 
4 squared is 16 
6 squared is 36 
7 squared is 49 </code></pre>
</div>
<div id="repeat-loops" class="section level2" number="11.10">
<h2>
<span class="header-section-number">11.10</span> <code>repeat</code> loops<a class="anchor" aria-label="anchor" href="#repeat-loops"><i class="fas fa-link"></i></a>
</h2>
<p><code>repeat</code> initiates an infinite loop and you <strong>must</strong> use <code>break</code> to exit. Probably best to use any other type of loop instead.</p>
<div class="sourceCode" id="cb768"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">i</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="kw">repeat</span> <span class="op">{</span>
 <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">-</span> <span class="fl">1</span>
 <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="kw">break</span><span class="op">(</span><span class="op">)</span>
 <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"i is"</span>, <span class="va">i</span>, <span class="st">"\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>i is 9 
i is 8 
i is 7 
i is 6 
i is 5 
i is 4 
i is 3 
i is 2 
i is 1 </code></pre>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="dataio.html"><span class="header-section-number">10</span> Data Input/Output</a></div>
<div class="next"><a href="loopfns.html"><span class="header-section-number">12</span> Loop Functions</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#controlflow"><span class="header-section-number">11</span> Control flow</a></li>
<li><a class="nav-link" href="#if---then---else"><span class="header-section-number">11.1</span> if - then - else:</a></li>
<li><a class="nav-link" href="#if---then---else-if---else"><span class="header-section-number">11.2</span> if - then - else if - else:</a></li>
<li><a class="nav-link" href="#conditional-assignment-with-if---else"><span class="header-section-number">11.3</span> Conditional assignment with if - else:</a></li>
<li><a class="nav-link" href="#conditional-assignment-with-ifelse"><span class="header-section-number">11.4</span> Conditional assignment with ifelse:</a></li>
<li>
<a class="nav-link" href="#for-loops"><span class="header-section-number">11.5</span> for loops</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#working-on-data-within-a-for-loop-fordata"><span class="header-section-number">11.5.1</span> Working on data within a for loop {fordata}</a></li>
<li><a class="nav-link" href="#nested-for-loops"><span class="header-section-number">11.5.2</span> Nested for loops</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#select-one-of-multiple-alternatives-with-switch"><span class="header-section-number">11.6</span> Select one of multiple alternatives with switch</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#switch-example-http-status-codes"><span class="header-section-number">11.6.1</span> switch example: HTTP Status Codes</a></li></ul>
</li>
<li><a class="nav-link" href="#while-loops"><span class="header-section-number">11.7</span> while loops</a></li>
<li><a class="nav-link" href="#break-stops-execution-of-a-loop"><span class="header-section-number">11.8</span> break stops execution of a loop:</a></li>
<li><a class="nav-link" href="#next-skips-the-current-iteration"><span class="header-section-number">11.9</span> next skips the current iteration:</a></li>
<li><a class="nav-link" href="#repeat-loops"><span class="header-section-number">11.10</span> repeat loops</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Programming for Data Science in R</strong>" was written by Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD. It was last built on 2021-07-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
